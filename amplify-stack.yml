AWSTemplateFormatVersion: '2010-09-09'
Description: 'Spanish Quiz Frontend - Amplify Hosting'

Resources:
  AmplifyApp:
    Type: AWS::Amplify::App
    Properties:
      Name: spanish-quiz-frontend
      Repository: https://github.com/aws-samples/create-react-app-amplify
      Platform: WEB
      BuildSpec: |
        version: 1
        frontend:
          phases:
            preBuild:
              commands:
                - npm install
            build:
              commands:
                - npm run build
          artifacts:
            baseDirectory: build
            files:
              - '**/*'
          cache:
            paths:
              - node_modules/**/*

  AmplifyBranch:
    Type: AWS::Amplify::Branch
    Properties:
      AppId: !GetAtt AmplifyApp.AppId
      BranchName: main

Outputs:
  AmplifyAppURL:
    Description: Amplify App URL
    Value: !Sub 'https://main.${AmplifyApp.DefaultDomain}'
